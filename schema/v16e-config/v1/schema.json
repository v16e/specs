{
  "type": "object",
  "properties": {
    "db": {
      "type": "string"
    },
    "dbBackend": {
      "description": "Optional database backend override. When omitted, backend is inferred from the db URI.",
      "enum": [
        "falcordb",
        "ladybug",
        "ladybug-remote"
      ],
      "type": "string"
    },
    "ignore": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "roots": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "packs": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "dynamicImports": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string"
          },
          "pattern": {
            "type": "string"
          },
          "targets": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "file",
          "pattern",
          "targets"
        ]
      }
    },
    "taint": {
      "$ref": "#/definitions/TaintConfigSection"
    },
    "frameworkDetection": {
      "type": "object",
      "properties": {
        "profiles": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "standard": {
          "type": "object",
          "properties": {
            "react": {
              "type": "boolean"
            },
            "reatom": {
              "type": "boolean"
            }
          }
        },
        "custom": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "patternDetection": {
      "type": "boolean"
    },
    "exportedOnly": {
      "type": "boolean"
    },
    "bulkUnwindBatchSize": {
      "description": "UNWIND batch size for FalkorDB bulk write (rows per query). Default 1000. Set to 1500â€“2000 on large graphs for fewer round-trips.",
      "type": "number"
    },
    "preloadSourceFiles": {
      "description": "When true, preload all tsconfig source files into memory once and use read-only host (task 6.1.4). Use if readFileUtf8 is still high in profile.",
      "type": "boolean"
    },
    "reports": {
      "description": "Report paths. When absent, CLI uses package default registry and code-reports/query-results.json.",
      "type": "object",
      "properties": {
        "queriesPath": {
          "type": "string"
        },
        "outputDir": {
          "type": "string"
        },
        "outputFile": {
          "type": "string"
        }
      }
    },
    "overlay": {
      "description": "Overlay cache backend. 'db' stores overlay in graph DB tables (default for all backends), 'file' uses NDJSON cache, 'disabled' skips caching.",
      "type": "object",
      "properties": {
        "cacheBackend": {
          "enum": [
            "db",
            "disabled",
            "file"
          ],
          "type": "string"
        }
      }
    }
  },
  "required": [
    "db"
  ],
  "definitions": {
    "TaintConfigSection": {
      "description": "Taint config per RFC-012. Sources/sanitizers/sinks: kind + optional pattern or ids.",
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "sources": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "poisons_wildcard_tail"
                  }
                },
                "required": [
                  "kind"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "call_id"
                  },
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "ids",
                  "kind"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "callee_name_regex"
                  },
                  "pattern": {
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "pattern"
                ]
              }
            ]
          }
        },
        "sanitizers": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "sanitizes_edge_to"
                  }
                },
                "required": [
                  "kind"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "call_id"
                  },
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "ids",
                  "kind"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "callee_name_regex"
                  },
                  "pattern": {
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "pattern"
                ]
              }
            ]
          }
        },
        "sinks": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "call_id"
                  },
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "ids",
                  "kind"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string",
                    "const": "callee_name_regex"
                  },
                  "pattern": {
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "pattern"
                ]
              }
            ]
          }
        }
      }
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/v16e/specs/main/schema/v16e-config/v1/schema.json",
  "version": "1",
  "title": "v16e Project Config",
  "additionalProperties": false
}